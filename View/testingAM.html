<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./assets/amcharts/amcharts.js" type="text/javascript"></script>
    <script src="./assets/amcharts/pie.js" type="text/javascript"></script>
</head>
<body>




    <div id="chart"></div>
    <script>
        TransactionIncomeExpenseChart(79);
        function TransactionIncomeExpenseChart(id) {

            var mainDiv = document.getElementById("chart");
            mainDiv.innerHTML = ""; //Clean the div everytime it is invoked
            // mainDiv.setAttribute("class", "col-lg-12");
            mainDiv.style.width = "100%";
            mainDiv.style.height = "400px";


            var request = new XMLHttpRequest();
            request.open("get", "../index.php?target=transactions&action=chartIncomeExpenses&ia=" + id);
            request.onreadystatechange = function () {
                if (!(request.readyState === 4 && request.status === 200)) {
                }else{
                    var response = JSON.parse(this.responseText);
                    console.log(response);
                var chart;
                var legend;
                var dar = response;
                console.log(dar);
                var chartData = dar;
                AmCharts.ready(function () {
                    // PIE CHART
                    chart = new AmCharts.AmPieChart();
                    chart.addTitle("Incomes And Expenses", 16);
                    chart.dataProvider = chartData;
                    chart.titleField = "kkey";
                    chart.valueField = "valuee";
                    chart.outlineColor = "#FFFFFF";
                    chart.outlineAlpha = 0.8;
                    chart.outlineThickness = 2;
                    chart.balloonText = "[[title]]<br><span style='font-size:14px'><b>[[value]]</b> ([[percents]]%)</span>";
                    // this makes the chart 3D
                    chart.depth3D = 15;
                    chart.angle = 30;
                    // WRITE
                    chart.write("chart");

                });
                }


                }

                request.send();

            }

    </script>
    <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="https://www.amcharts.com/lib/3/pie.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    <script src="https://www.amcharts.com/lib/3/themes/light.js"></script>


<script src="assets/plugins/jquery-1.10.2.js"></script>
<script src="assets/plugins/bootstrap/bootstrap.min.js"></script>
<script src="assets/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="assets/plugins/pace/pace.js"></script>
<script src="assets/scripts/siminta.js"></script>
<!-- Page-Level Plugin Scripts-->
<script src="assets/plugins/morris/raphael-2.1.0.min.js"></script>
<script src="assets/plugins/morris/morris.js"></script>
<script src="assets/scripts/dashboard-demo.js"></script>
</body>

</html>